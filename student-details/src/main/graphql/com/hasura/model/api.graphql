mutation addNewStudents($query_param: [student_insert_input!]!) {
  insert_student(objects: $query_param) {
    affected_rows
     returning {
          srn
          name
        }
  }
}

mutation sendAttendance($query_param: [attendance_insert_input!]!) {
  insert_attendance(objects: $query_param) {
    affected_rows
  }
}

mutation sendTeacherAttendance($query_param: [teacher_attendance_insert_input!]!) {
    insert_teacher_attendance(objects: $query_param) {
        affected_rows
    }
}
mutation sendTeacherAttendanceNewFormat($query_param: [teacher_attendance_updated_insert_input!]!) {
    insert_teacher_attendance_updated(objects: $query_param) {
        affected_rows
    }
}

query getStudentsForSchool {
    student(where: {isActive: {_eq: true}}) {
        fatherContactNumber
        grade
        fatherName
        shiksha_mitra_name
        shiksha_mitra_contact
        shiksha_mitra_address
        shiksha_mitra_relation
        name
        school_code
        srn
        section
        stream
        is_sm_registered
    }
}

mutation updateShikshaMitraDetails($srn: String, $updatedShikshaMitraName: String,
    $updatedShikshaMitraContact: String, $updatedShikshaMitraRelation: String, $updatedShikshaMitraAddress: String) {  update_student(
    where: {srn: {_eq: $srn}},
    _set: {
        shiksha_mitra_name: $updatedShikshaMitraName
        shiksha_mitra_relation: $updatedShikshaMitraRelation
        shiksha_mitra_contact: $updatedShikshaMitraContact
        shiksha_mitra_address: $updatedShikshaMitraAddress
        is_sm_registered : true
    }
) {
    affected_rows
    returning {
        srn
        shiksha_mitra_name
        shiksha_mitra_address
        shiksha_mitra_relation
        shiksha_mitra_contact
        is_sm_registered
    }
}
}

mutation updateStudentSection($srn: String, $changedSection: String) {  update_student(
    where: {srn: {_eq: $srn}},
    _set: {
      section: $changedSection
    }
  ) {
    affected_rows
    returning {
      id
      srn
      section
      name
    }
  }
}




query FetchAttendanceByGradeSection($date: date, $grade: Int, $section: String) {
    attendance_aggregate(where: {date: {_eq: $date}, studentByStudent: {grade: {_eq: $grade}, section: {_eq: $section}}}) {
        aggregate {
            count
        }
        nodes {
            studentByStudent {
                name
                srn
                grade
                section
            }
            isPresent
            temperature
        }

    }
}


query FetchAttendanceByGradeSectionStream($date: date, $grade: Int, $section: String,  $stream: String) {
    attendance_aggregate(where: {date: {_eq: $date}, studentByStudent: {grade: {_eq: $grade}, section: {_eq: $section}, stream: {_eq: $stream}}}) {
        nodes {
            studentByStudent {
                name
                srn
                grade
                section
            }
            isPresent
        }

    }
}

query FetchTeacherAttendance($date:date) {
    teacher_attendance_updated(where: {date_of_attendance : {_eq : $date}}) {
            employee_id
            isPresentInSchool
            employee_name
            employee_designation
            attendance_status
            other_reason

    }
}

mutation sendUsageInfo($query_param: [trackInstall_insert_input!]!) {
    insert_trackInstall(objects: $query_param) {
        affected_rows
    }
}

mutation sendSMUpdateData($query_param: [sm_usage_tracking_insert_input!]!) {
    insert_sm_usage_tracking(objects: $query_param) {
        affected_rows
    }
}

